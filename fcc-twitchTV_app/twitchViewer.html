<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Twitch.TV Viewer</title>
</head>

<style>
	body {
		padding:20px;
	}
	#loader {
		width:60px;
		height: auto;
		position: center;
	}
	.userListGroup {
		position: center;
	}
	.footer {
	  position: absolute;
	  bottom: 0;
	  width: 100%;
	  /* Set the fixed height of the footer here */
	  height: 40px;
	  line-height: 40px; /* Vertically center the text there */
	  background-color: white;
	}
</style>

<body>
	<div class ="container-fluid jumbotron" id="header">
		<h1 class="text-center" id="titleText">Twitch.TV Streamers</hi>
		<h3 class="text-center" id="subtitleText">See who's online and streaming your favorite content</h3>
		<a href = "https://www.twitch.tv/freecodecamp" target = "blank_">
		<h3 class="text-center" id="fccStatus"></h3></a>
	</div>


	<!--Twitch user filter selectors
	<div class="container-fluid text-center" id="filterSelectorGroup">
		<div class="btn-group" data-toggle="buttons">
			<label class="btn btn-primary active">
				<input type="radio" name="options" id="allSelector" autocomplete="off" checked> All
			</label>
			<label class="btn btn-primary">
				<input type="radio" name="options" id="onlineSelector" autocomplete="off"> Online
			</label>
			<label class="btn btn-primary">
				<input type="radio" name="options" id="offlineSelector" autocomplete="off"> Offline
			</label>
		</div>
	</div>
	-->

	<!-- Twitch User List -->
	<div class="row">
		<div class="col-sm-4">
			<h1>Logo:</h1>
		</div>
		<div class="col-sm-4">
			<h1>Display Name:</h1>
		</div>
		<div class="col-sm-4">
			<h1>Status:<h1>
		</div>
	</div>
	<div id="userInfo">
	
	</div>
	<!-- Loading gif if I can get this stupid thing to work
	<span class="text-center">
		<img src = "https://media.giphy.com/media/xTk9ZvMnbIiIew7IpW/giphy.gif" alt ="" id="loader" />
			</span>
			-->
		
	<!-- My Footer -->
	<footer class="footer">
	  <div class="container-fluid">
		<span class="text-muted">By Erik Thunberg
		  <a href="https://codepen.io/ethunberg1/#" target="_blank"><i id="codepen_thumb" class="fa fa-codepen ethunb"> Codepen</i></a>
		  <a href="https://github.com/ethunberg1" target="_blank"><i id="github_thumb" class="fa fa-github ethunb"> Github</i></a>
		</span>
	  </div>
	</footer>
</body>

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>	
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/esm/popper.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/esm/popper.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
	$(document).ready(function(){
	var users = ["ESL_SC2", "OgamingSC2", "cretetion", "freecodecamp", "storbeck", "habathcx", "RobotCaleb", "noobs2ninjas", "competelyfictionaltestuser"];		
	
		//Display status of FreeCode Camp user (whether online or offline)
		var url = 'https://wind-bow.gomix.me/twitch-api/streams/freecodecamp?callback=?';
		$.getJSON(url, function(data1) {
  			if(data1.stream === null) {
					$('#fccStatus').html("Free Code Camp is Currenty OFFLINE!")
				} else {
					$('#fccStatus').html("Free Code Camp is Currenty ONLINE!")
			}
		});
	
		//Display status for each user in the users array
		for (var i=0; i<users.length; i++) {
			var url2= 'https://wind-bow.gomix.me/twitch-api/streams/'+users[i]+'/?callback=?';

				$.getJSON(url2).done(function(data2) {
					var logo;
					var status;
					var name;
					//console.log(url2);
					//write out your conditions if there is an error in the API response
					if(data2.error) {
						logo = "http://insight.venturebeat.com/sites/all/modules/features/vb_intel_analysts/assets/images/analyst-placeholder-avatar.png";
						name = data2.message;
						status = data2.error;
						//console.log(data2.error);
						$("#userList").prepend("<div class='row'>" + "<div class='col-md-4'>"+"<img src ='" + logo + "'>"+"</div>" + "<div class='col-md-4'>"+name+"</div>" + "<div class='col-md-4'>"+status+"</div></div>");
					}
				});
				}
		for(var i=0; i<users.length; i++) {
			var onlineURL = "https://wind-bow.gomix.me/twitch-api/streams/"+users[i]+"/?callback=?";
				$.getJSON(onlineURL, function(data3){
					
					var logo = data3.stream.channel.logo;
					var status = data3.stream.channel.status;
					var name = data3.stream.channel.display_name;
					//console.log(name);
					$("#userList").prepend("<div class='row'>" + "<div class='col-md-4'>"+"<img src ='" + logo + "'>"+"</div>" + "<div class='col-md-4'>"+name+"</div>" + "<div class='col-md-4'>"+status+"</div></div>");
				});
		};
	}); 
</script>

</html>